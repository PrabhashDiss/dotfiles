#!/usr/bin/env bash

SCRIPT_DIR="$HOME/bin/dmenu_scripts"

# Check if directory exists
if [ ! -d "$SCRIPT_DIR" ]; then
    notify-send "Error" "Script directory not found: $SCRIPT_DIR"
    exit 1
fi

# List executable scripts, show in dmenu, and execute
SCRIPT=$(
  find "$SCRIPT_DIR/" -maxdepth 1 \( -type f -o -type l \) -executable -printf '%f\n' |
  sort |
  dmenu -c -l 10 -i -p "Run script: "
)

if [ -n "$SCRIPT" ]; then
    EXEC_PATH="$SCRIPT_DIR/$SCRIPT"
    if [ -x "$EXEC_PATH" ]; then
        "$EXEC_PATH"
    else
        notify-send "Error" "File is not executable: $SCRIPT"
    fi
fi
